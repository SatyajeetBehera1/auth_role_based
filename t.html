<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Print Document</title>
    <style>
      @page {
        size: A4;
        margin: 20mm;
      }

      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }

      .page {
        padding: 20px;
        border: 1px solid #ccc;
        margin-bottom: 20px;
      }

      h1 {
        font-size: 24px;
        margin-bottom: 10px;
      }

      p {
        font-size: 16px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div id="document" class="document">
    </div>

    <script>
      const data = [
        {
          heading: "Page 1",
          content: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
        },
        {
          heading: "Page 2",
          content:
            "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.",
        },
        {
          heading: "Page 3",
          content:
            "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
        },
        {
          heading: "Page 4",
          content:
            "Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
        },
      ];

      function generatePages() {
        const documentDiv = document.getElementById("document");
        let currentPage = 1;
        let currentHeight = 0;
        let pageDiv = null;

        data.forEach((item, index) => {
          const heading = document.createElement("h1");
          heading.textContent = item.heading;

          const paragraph = document.createElement("p");
          paragraph.textContent = item.content;

          const tempDiv = document.createElement("div");
          tempDiv.appendChild(heading);
          tempDiv.appendChild(paragraph);
          tempDiv.style.position = "absolute";
          tempDiv.style.left = "-9999px";
          tempDiv.style.top = "-9999px";
          document.body.appendChild(tempDiv);
          const contentHeight = tempDiv.offsetHeight;
          document.body.removeChild(tempDiv);

          if (!pageDiv) {
            pageDiv = document.createElement("div");
            pageDiv.classList.add("page");
          }

          if (currentHeight + contentHeight > (297 - 40) * 3.78) {
            documentDiv.appendChild(pageDiv);
            currentPage++;
            currentHeight = 0;
            pageDiv = document.createElement("div");
            pageDiv.classList.add("page");
          }

          if (pageDiv) {
            pageDiv.appendChild(heading);
            pageDiv.appendChild(paragraph);
            currentHeight += contentHeight;
          }

          if (index === data.length - 1 && pageDiv) {
            documentDiv.appendChild(pageDiv);
          }
        });
      }

      generatePages();
    </script>
  </body>
</html>